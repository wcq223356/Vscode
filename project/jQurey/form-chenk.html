<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../../node_modules/jquery/dist/jquery.js"></script>
    <title>Document</title>
    <style>
        span {
            color: red;
            font-size: 15px;
        }
    </style>
</head>

<body>
    <script>
        $(function () {
            $("input").blur(function () {
                $('span').html('')

                let uerNameCheck = testEmpty($('input[name= "uerName"]'));
                let uerPassCheck = testEmpty($('input[name= "uerPass"]'));
                let uerPass2Check = testEmpty($('input[name= "uerPass2"]'));
                let passCheck = testPassword()
                let usrPhoneCheck = testEmpty($('input[name= "usrPhone"]'));
                let usrPhoneFormatCheck = testFormat($('input[name= "usrPhone"]'), /^1[3-9]\d{9}$/);
                let useMailCheck = testEmpty($('input[name= "useMail"]'));
                let uerMailFormatCheck = testFormat($('input[name= "useMail"]'), /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/);

                // if (uerNameCheck && uerPassCheck && uerPass2Check &&
                //     passCheck && usrPhoneCheck && usrPhoneFormatCheck && 
                //     useMailCheck && uerMailFormatCheck) {
                //     }



                function testEmpty(dom, tip) {
                    if (dom.val() === '') {
                        tip = '该信息不能为空';
                        if (dom.next().html() === '') {
                            dom.next().html(tip)
                        }
                        return false;
                    }
                    return true;

                }


                function testFormat(dom2, reg, tip2) {
                    if (!reg.test(dom2.val())) {
                        tip2 = '格式不正确';
                        if (dom2.next().html() === '') {
                            dom2.next().html(tip2)
                            return false;
                        }
                        return true;
                    }
                }

                function testPassword() {
                    if ($('input[name= "usrPass2"]').val() !== $('input[name= "uerPass"]').val()) {
                        $('input[name= "usrPass2"]').next().html('两次输入的密码不一致，请重新输入');
                        return false;
                    }
                    return true;
                }

            })
        })

        

    </script>



    <form action="">
        <p>
            用户名：<input type="text" name="uerName">
            <span></span>
        </p>
        <p>
            密码：<input type="password" name="uerPass" id="">
            <span></span>
        </p>
        <p>
            确认密码：<input type="password" name="usrPass2" id="">
            <span></span>
        </p>
        <p>
            手机号：<input type="tel" name="usrPhone" id="">
            <span></span>
        </p>

        <p>
            邮箱：<input type="email" name="useMail" id="">
            <span></span>
        </p>

        <button id="btn">注册</button>

    </form>
</body>

</html>